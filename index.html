<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/r0sa-bio-digital/meslo@1.0.0/meslo.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.1.3/socket.io.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/diff/dist/diff.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.1/styles/github.min.css" />
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css" />
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui-slim.min.js"></script>
        <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.29.1/min/vs/editor/editor.main.min.css"/>
        <script>
            var require = { paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.29.1/min/vs' } };
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.29.1/min/vs/loader.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.29.1/min/vs/editor/editor.main.nls.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.29.1/min/vs/editor/editor.main.min.js"></script>
        <style>
            html {
                overflow: hidden;
            }
            .d2h-file-header {
                display: none;
            }
            .d2h-diff-table {
                font-family: "meslo";
                font-size: 16px
            }
        </style>
        <script>
            console.info('welcome to knyte space');
            const knyteSpaceApi = {
                apiBaseUrl: location.origin + '/',
                AsyncFunction: Object.getPrototypeOf(async function(){}).constructor,
                viewportElement: undefined,
                initialKnytes: undefined,
                promptOnExit: () => {return undefined;}
            };
            async function bootTheSystem()
            {
                // resolve viewport
                knyteSpaceApi.viewportElement = document.getElementById('viewport');
                // get client bootloader knyte
                const response = await fetch(knyteSpaceApi.apiBaseUrl + 'clientbootloaderknyte');
                const json = await response.json();
                const clientBootloaderKnyte = json.result[0];
                // run client bootloader code
                const {content} = clientBootloaderKnyte;
                try
                {
                    const clientBootloaderFunction = new knyteSpaceApi.AsyncFunction('thisKnyte', content);
                    await clientBootloaderFunction(clientBootloaderKnyte);
                }
                catch(e)
                {
                    throw e;
                }
            }
        </script>
    </head>
    <body onload="bootTheSystem()">
        <div id="viewport">
            <div id="bootLoadingSpinner" style="position: absolute; left: 35%; bottom: 35%; width: 30%; height: 30%;">
                <svg class="bootIcon" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                  <rect x="3" y="3" width="30" height="30" fill="#160f19">
                    <animate attributeName="fill" values="#6eca98;#160f19;#160f19" keyTimes="0;0.125;1" dur="0.9803921568627451s" repeatCount="indefinite" begin="0s" calcMode="discrete"></animate>
                  </rect>
                  <rect x="35" y="3" width="30" height="30" fill="#160f19">
                    <animate attributeName="fill" values="#6eca98;#160f19;#160f19" keyTimes="0;0.125;1" dur="0.9803921568627451s" repeatCount="indefinite" begin="0.12254901960784313s" calcMode="discrete"></animate>
                  </rect>
                  <rect x="67" y="3" width="30" height="30" fill="#160f19">
                    <animate attributeName="fill" values="#6eca98;#160f19;#160f19" keyTimes="0;0.125;1" dur="0.9803921568627451s" repeatCount="indefinite" begin="0.24509803921568626s" calcMode="discrete"></animate>
                  </rect>
                  <rect x="3" y="35" width="30" height="30" fill="#160f19">
                    <animate attributeName="fill" values="#6eca98;#160f19;#160f19" keyTimes="0;0.125;1" dur="0.9803921568627451s" repeatCount="indefinite" begin="0.8578431372549019s" calcMode="discrete"></animate>
                  </rect>
                  <rect x="67" y="35" width="30" height="30" fill="#160f19">
                    <animate attributeName="fill" values="#6eca98;#160f19;#160f19" keyTimes="0;0.125;1" dur="0.9803921568627451s" repeatCount="indefinite" begin="0.3676470588235294s" calcMode="discrete"></animate>
                  </rect>
                  <rect x="3" y="67" width="30" height="30" fill="#160f19">
                    <animate attributeName="fill" values="#6eca98;#160f19;#160f19" keyTimes="0;0.125;1" dur="0.9803921568627451s" repeatCount="indefinite" begin="0.7352941176470588s" calcMode="discrete"></animate>
                  </rect>
                  <rect x="35" y="67" width="30" height="30" fill="#160f19">
                    <animate attributeName="fill" values="#6eca98;#160f19;#160f19" keyTimes="0;0.125;1" dur="0.9803921568627451s" repeatCount="indefinite" begin="0.6127450980392157s" calcMode="discrete"></animate>
                  </rect>
                  <rect x="67" y="67" width="30" height="30" fill="#160f19">
                    <animate attributeName="fill" values="#6eca98;#160f19;#160f19" keyTimes="0;0.125;1" dur="0.9803921568627451s" repeatCount="indefinite" begin="0.49019607843137253s" calcMode="discrete"></animate>
                  </rect>
                </svg>
              </div>            
        </div>
    </body>
</html>